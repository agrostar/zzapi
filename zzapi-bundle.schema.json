{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "zzapi is an API testing and documentation tool + vs code extension",
  "$defs": {
    "header": {
      "type": "object",
      "required": ["name", "value"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the header"
        },
        "value": { "type": "string", "description": "Value of the header" },
        "doc": {
          "type": "string",
          "description": "Documentation, typically in Markdown"
        }
      }
    },
    "param": {
      "type": "object",
      "required": ["name", "value"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the parameter."
        },
        "value": { "type": "string", "description": "Value of the parameter" },
        "doc": {
          "type": "string",
          "description": "Documentation, typically in Markdown"
        },
        "encode": {
          "type": "boolean",
          "description": "Whether to URL-encode the parameter value (names will never be encoded)"
        }
      }
    },
    "options": {
      "description": "Options applicable to requests: follow, verifySSL",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "follow": {
          "description": "If set, will automatically follow redirects (default: false)",
          "type": "boolean"
        },
        "verifySSL": {
          "description": "If set, will verify the SSL certificate (default: false)",
          "type": "boolean"
        }
      }
    },
    "tests": {
      "description": "A list of tests to run against the response"
    }
  },
  "type": "object",
  "required": ["requests"],
  "additionalProperties": false,
  "properties": {
    "common": {
      "description": "Some properties that are applied to all requests.",
      "type": "object",
      "properties": {
        "baseUrl": {
          "type": "string",
          "description": "baseUrl, if defined, will be prepended to all request URLs"
        },
        "headers": {
          "description": "HTTP Headers to be sent as part of any request in this bundle",
          "type": "array",
          "items": { "$ref": "#/$defs/header" }
        },
        "options": { "$ref": "#/$defs/options" },
        "tests": { "$ref": "#/$defs/tests" }
      }
    },
    "requests": {
      "type": "array",
      "description": "Each request defines an HTTP request",
      "items": {
        "type": "object",
        "required": ["name", "url", "method"],
        "properties": {
          "name": { "type": "string" },
          "url": { "type": "string" },
          "method": {
            "type": "string",
            "enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"]
          },
          "headers": {
            "description": "HTTP Headers to be sent as part of the request. This is in addition to any header defined in common. Headers can be overridden.",
            "type": "array",
            "items": { "$ref": "#/$defs/header" }
          },
          "params": {
            "description": "Query string parameters",
            "type": "array",
            "items": { "$ref": "#/$defs/param" }
          },
          "options": { "$ref": "#/$defs/options" }
        }
      }
    }
  }
}
